@import 'tailwindcss';
@import 'fumadocs-ui/css/neutral.css';
@import 'fumadocs-ui/css/preset.css';

/* Plex UI design tokens only (NOT the full @plexui/ui/css bundle, which
   resets Tailwind theme tokens and overrides dark-mode variants) */
@import '../packages/ui/dist/es/styles/variables-primitive.css';
@import '../packages/ui/dist/es/styles/variables-semantic.css';
@import '../packages/ui/dist/es/styles/variables-components.css';

/* Let Tailwind scan Plex UI component class usage */
@source "../packages/ui";

/* Page background and OpenAI-matching color tokens.
   Override Fumadocs variables so the entire shell uses our palette. */
:root {
  --color-fd-background: #ffffff;
  --color-fd-foreground: #181818;
  --color-fd-muted-foreground: #5d5d5d;
  --color-fd-border: #e5e5e5;
  --color-fd-accent: #f5f5f5;
  --docs-surface-elevated: var(--color-surface-secondary);
  --docs-controls-bg: #ffffff;
  --docs-code-block-bg: #f9f9f9;
  --docs-code-block-bg-opaque: #f9f9f9;
}

/* Plex UI tokens use light-dark(); color-scheme must match theme so preview responds */
:root {
  color-scheme: light dark;
}

[data-theme='light'],
html.light {
  color-scheme: light;
  background-color: #ffffff;
  --color-fd-background: #ffffff;
  --color-fd-foreground: #181818;
  --color-fd-muted-foreground: #5d5d5d;
  --color-fd-border: #e5e5e5;
  --color-fd-accent: #f5f5f5;
  --docs-surface-elevated: var(--color-surface-secondary);
  --docs-controls-bg: #ffffff;
  --docs-code-block-bg: #f9f9f9;
  --docs-code-block-bg-opaque: #f9f9f9;
}

[data-theme='dark'],
html.dark {
  color-scheme: dark;
  background-color: #0d0d0d;
  --color-fd-background: #0d0d0d;
  --color-fd-foreground: #ececec;
  --color-fd-muted-foreground: #999999;
  --color-fd-border: #2e2e2e;
  --color-fd-accent: #1a1a1a;
  --docs-surface-elevated: var(--color-surface);
  --docs-controls-bg: var(--color-surface);
  --docs-code-block-bg: #161616;
  --docs-code-block-bg-opaque: #161616;
}

body {
  background-color: var(--color-fd-background);
}

#nd-docs-layout {
  background-color: var(--color-fd-background);
  transition: none !important;
}

/* Match Storybook typography baseline so controls render with same face/weight */
html,
:host {
  font-family: var(--font-sans);
  font-synthesis-weight: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  letter-spacing: var(--tracking-normal);
}

/* Shiki token colors: support both .dark (Fumadocs) and [data-theme="dark"] (our sync) */
[data-theme='dark'] .shiki code span,
html.dark .shiki code span {
  color: var(--shiki-dark);
}

/* Tracking aliases used by Plex UI tokens */
:root,
:where([data-theme]) {
  --tracking-wide: var(--font-tracking-wide);
  --tracking-normal: var(--font-tracking-normal);
  --tracking-tight: var(--font-tracking-tight);
}

/* Fumadocs shiki.css @apply needs these in theme */
@theme {
  --color-fd-diff-remove: rgba(200, 10, 100, 0.12);
  --color-fd-diff-remove-symbol: rgb(230, 10, 100);
  --color-fd-diff-add: rgba(14, 180, 100, 0.1);
  --color-fd-diff-add-symbol: rgb(10, 200, 100);
}

/* Fumadocs shiki.css @apply needs these; define manually for opacity modifiers */
@utility border-fd-primary/50 {
  border-color: color-mix(in oklab, var(--color-fd-primary) 50%, transparent);
}

@utility border-fd-primary/30 {
  border-color: color-mix(in oklab, var(--color-fd-primary) 30%, transparent);
}

@utility bg-fd-primary/10 {
  background-color: color-mix(in oklab, var(--color-fd-primary) 10%, transparent);
}

@utility text-fd-primary/50 {
  color: color-mix(in oklab, var(--color-fd-primary) 50%, transparent);
}

/* Lightweight token utilities used across migrated Storybook demos */
.text-secondary {
  color: var(--color-text-secondary) !important;
}

.text-tertiary {
  color: var(--color-text-tertiary) !important;
}

.text-danger {
  color: var(--color-text-danger) !important;
}

.text-warning {
  color: var(--color-text-warning) !important;
}

.text-info {
  color: var(--color-text-info) !important;
}

.text-success {
  color: var(--color-text-success) !important;
}

.text-discovery {
  color: var(--color-text-discovery) !important;
}

.fill-secondary {
  fill: var(--color-text-secondary) !important;
}

.fill-tertiary {
  fill: var(--color-text-tertiary) !important;
}

.fill-danger {
  fill: var(--color-text-danger) !important;
}

.border-alpha\/15 {
  border-color: var(--alpha-15) !important;
}

.border-alpha\/20 {
  border-color: var(--alpha-20) !important;
}

/* Transition demo blocks: visible on docs preview background (not white-on-white) */
:root {
  --story-example-secondary-color: hsl(346deg 45% 82%);
  --story-example-primary-color: hsl(348deg 70% 70%);
}

[data-theme='dark'],
html.dark {
  --story-example-secondary-color: hsl(334deg 23% 54% / 80%);
  --story-example-primary-color: hsl(334deg 48.07% 60.81%);
}

.story-example-secondary {
  background: var(--story-example-secondary-color);
}

.story-example-primary {
  background: var(--story-example-primary-color);
}

.storybook-tg {
  &[data-entering] {
    opacity: 0;
  }
  &[data-exiting] {
    opacity: 1;
  }
  &[data-entering-active],
  &[data-exiting][data-interrupted] {
    box-shadow: 0 0 0 5px green;
    opacity: 1;
    transition: opacity 2s ease, box-shadow 2s ease;
  }
  &[data-exiting-active],
  &[data-entering][data-interrupted] {
    box-shadow: 0 0 0 5px red;
    opacity: 0;
    transition: opacity 1s ease, box-shadow 1s ease;
  }
}

/* Sticky nav — no backdrop blur, solid background + border (OpenAI style) */
#nd-docs-layout header[data-transparent='false'] {
  background: var(--color-fd-background);
}

/* Docs shell — OpenAI-matching layout */
#nd-docs-layout.plex-docs-shell {
  --fd-header-height: 64px;
  --fd-sidebar-width: 0px;
  --fd-toc-width: 0px;
  --fd-layout-width: 136rem;
  background: var(--color-fd-background);
}

html[data-docs-width='centered'] #nd-docs-layout.plex-docs-shell {
  --fd-layout-width: 97rem;
}

@media (min-width: 768px) {
  #nd-docs-layout.plex-docs-shell {
    --fd-sidebar-width: 218px;
  }
}

@media (min-width: 768px) {
  html[data-docs-left-sidebar='off'] #nd-docs-layout.plex-docs-shell {
    --fd-sidebar-width: 0px;
  }
}

@media (min-width: 1280px) {
  #nd-docs-layout.plex-docs-shell {
    --fd-toc-width: 248px;
  }
}

@media (min-width: 1280px) {
  html[data-docs-right-sidebar='off'] #nd-docs-layout.plex-docs-shell,
  #nd-docs-layout.plex-docs-shell:has(.plex-docs-page--no-right-sidebar) {
    --fd-toc-width: 0px;
  }
}

html[data-docs-left-sidebar='off'] #nd-docs-layout.plex-docs-shell [data-sidebar-placeholder],
html[data-docs-left-sidebar='off'] #nd-docs-layout.plex-docs-shell #nd-sidebar,
html[data-docs-left-sidebar='off'] #nd-docs-layout.plex-docs-shell [data-sidebar-panel] {
  display: none;
}

html[data-docs-right-sidebar='off'] #nd-docs-layout.plex-docs-shell #nd-toc {
  visibility: hidden;
  pointer-events: none;
}

#nd-docs-layout.plex-docs-shell [data-sidebar-placeholder] {
  border-right: none;
}

/* ── Sidebar search trigger — compact pill at top of sidebar ── */
.sidebar-search-trigger {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  height: 36px;
  padding: 0 8px 0 12px;
  margin-bottom: 8px;
  border: 1px solid rgb(0 0 0 / 5%);
  border-radius: 8px;
  background: var(--color-fd-background);
  color: #5d5d5d;
  font-size: 14px;
  line-height: 20px;
  cursor: pointer;
  transition: border-color 0.15s ease;
}

.sidebar-search-trigger:hover {
  border-color: rgb(0 0 0 / 10%);
}

[data-theme='dark'] .sidebar-search-trigger,
html.dark .sidebar-search-trigger {
  border-color: rgb(255 255 255 / 5%);
  color: #888888;
}

[data-theme='dark'] .sidebar-search-trigger:hover,
html.dark .sidebar-search-trigger:hover {
  border-color: rgb(255 255 255 / 10%);
}

.sidebar-search-trigger svg {
  flex: 0 0 auto;
}

.sidebar-search-trigger > span:not(.sidebar-search-keys) {
  flex: 1 1 auto;
  text-align: left;
}

.sidebar-search-keys {
  display: flex;
  align-items: center;
  gap: 4px;
  flex: 0 0 auto;
  margin-left: auto;
}

.sidebar-search-trigger kbd {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 20px;
  height: 20px;
  padding: 0;
  font-family: inherit;
  font-size: 12px;
  font-weight: 500;
  line-height: 1;
  color: #5d5d5d;
  background: #f9f9f9;
  border: 1px solid rgb(0 0 0 / 5%);
  border-radius: 6px;
}

[data-theme='dark'] .sidebar-search-trigger kbd,
html.dark .sidebar-search-trigger kbd {
  color: #888888;
  background: rgb(255 255 255 / 6%);
  border-color: rgb(255 255 255 / 8%);
}

/* ── Desktop sidebar — OpenAI-matching styles ── */
#nd-docs-layout.plex-docs-shell #nd-sidebar {
  background: var(--color-fd-background);
  border-right: none;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
}

#nd-docs-layout.plex-docs-shell>div:has(> #nd-sidebar),
#nd-docs-layout.plex-docs-shell #nd-toc {
  top: var(--fd-header-height);
  height: calc(100dvh - var(--fd-header-height));
}

#nd-docs-layout.plex-docs-shell>div:has(> #nd-sidebar) {
  overflow: hidden;
}

/* Banner area (sidebar search) — ensure it's visible */
#nd-docs-layout.plex-docs-shell #nd-sidebar>div:first-child {
  padding: 12px 12px 0 12px;
}

/* Sidebar section headers — 14px/600 title-case, matches OpenAI reference.
   Headers sit at ~24px from sidebar left (container 12px + margin-left 12px),
   while items sit at ~32px (container 12px + item padding-left 20px),
   creating an 8px visual indent for items under headers. */
#nd-docs-layout.plex-docs-shell #nd-sidebar p {
  margin: 24px 0 8px !important;
  margin-left: 12px !important;
  padding-block: 0;
  padding-inline-start: 0 !important;
  padding-inline-end: 12px !important;
  font-size: 14px;
  font-weight: 600 !important;
  line-height: 20px;
  letter-spacing: -0.01em;
  text-transform: none;
  color: var(--color-fd-foreground, #181818) !important;
}

[data-theme='dark'] #nd-docs-layout.plex-docs-shell #nd-sidebar p,
html.dark #nd-docs-layout.plex-docs-shell #nd-sidebar p {
  color: var(--color-fd-foreground, #ececec) !important;
}

#nd-docs-layout.plex-docs-shell #nd-sidebar p[style] {
  padding-inline-start: 0 !important;
  padding-inline-end: 12px !important;
  margin-left: 12px !important;
}

#nd-docs-layout.plex-docs-shell #nd-sidebar p:first-of-type {
  margin-top: 0;
}

#nd-docs-layout.plex-docs-shell #nd-sidebar>div:first-child>a {
  display: none;
}

#nd-docs-layout.plex-docs-shell #nd-sidebar .overscroll-contain {
  padding: 8px 12px 24px 12px;
  overflow-y: auto !important;
  overscroll-behavior: contain;
  scrollbar-gutter: stable;
}

/* Sidebar items — 14px/400, padding 6px 12px 6px 20px (reference-exact).
   High-specificity selectors to override Fumadocs base styles. */
#nd-docs-layout.plex-docs-shell #nd-sidebar a[href^='/docs/'],
#nd-docs-layout.plex-docs-shell #nd-sidebar a[href^='/docs/'][data-active],
#nd-docs-layout.plex-docs-shell #nd-sidebar a[href^='/docs/']:link,
#nd-docs-layout.plex-docs-shell #nd-sidebar a[href^='/docs/']:visited {
  min-height: 0;
  padding: 6px 12px 6px 20px !important;
  margin: 0 !important;
  border-radius: 8px !important;
  font-size: 14px !important;
  font-weight: 400 !important;
  line-height: 20px !important;
  letter-spacing: -0.14px;
  color: #282828 !important;
  background: transparent;
  box-shadow: none;
  transition: background-color 0.15s ease;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
}

[data-theme='dark'] #nd-docs-layout.plex-docs-shell #nd-sidebar a[href^='/docs/'],
[data-theme='dark'] #nd-docs-layout.plex-docs-shell #nd-sidebar a[href^='/docs/']:link,
[data-theme='dark'] #nd-docs-layout.plex-docs-shell #nd-sidebar a[href^='/docs/']:visited,
html.dark #nd-docs-layout.plex-docs-shell #nd-sidebar a[href^='/docs/'],
html.dark #nd-docs-layout.plex-docs-shell #nd-sidebar a[href^='/docs/']:link,
html.dark #nd-docs-layout.plex-docs-shell #nd-sidebar a[href^='/docs/']:visited {
  color: #c0c0c0 !important;
}

#nd-docs-layout.plex-docs-shell #nd-sidebar a[href='/docs/components'] {
  display: none;
}

#nd-docs-layout.plex-docs-shell #nd-sidebar a[href^='/docs/'][style] {
  padding-inline-start: 20px !important;
  padding-inline-end: 12px !important;
}

/* Sidebar hover — subtle background only, NO color change */
#nd-docs-layout.plex-docs-shell #nd-sidebar a[href^='/docs/']:hover {
  background: rgba(40, 40, 40, 0.05) !important;
}

[data-theme='dark'] #nd-docs-layout.plex-docs-shell #nd-sidebar a[href^='/docs/']:hover,
html.dark #nd-docs-layout.plex-docs-shell #nd-sidebar a[href^='/docs/']:hover {
  background: rgba(255, 255, 255, 0.06) !important;
}

/* Sidebar active — 8% gray bg only, NO font-weight or color change, NO shadow */
#nd-docs-layout.plex-docs-shell #nd-sidebar a[href^='/docs/'][data-active='true'] {
  background: rgba(40, 40, 40, 0.08) !important;
  color: #282828 !important;
  font-weight: 400 !important;
  box-shadow: none !important;
}

[data-theme='dark'] #nd-docs-layout.plex-docs-shell #nd-sidebar a[href^='/docs/'][data-active='true'],
html.dark #nd-docs-layout.plex-docs-shell #nd-sidebar a[href^='/docs/'][data-active='true'] {
  background: rgba(255, 255, 255, 0.1) !important;
  color: #c0c0c0 !important;
}

/* Sidebar active hover — slightly stronger */
#nd-docs-layout.plex-docs-shell #nd-sidebar a[href^='/docs/'][data-active='true']:hover {
  background: rgba(40, 40, 40, 0.12) !important;
}

[data-theme='dark'] #nd-docs-layout.plex-docs-shell #nd-sidebar a[href^='/docs/'][data-active='true']:hover,
html.dark #nd-docs-layout.plex-docs-shell #nd-sidebar a[href^='/docs/'][data-active='true']:hover {
  background: rgba(255, 255, 255, 0.14) !important;
}

/* ── Mobile sidebar drawer — mirrors desktop sidebar styles ── */
#nd-sidebar-mobile {
  background: var(--color-fd-background);
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
}

#nd-sidebar-mobile a[href^='/docs/'] {
  min-height: 0;
  padding: 6px 12px 6px 20px !important;
  margin: 0;
  border-radius: 8px !important;
  font-size: 14px;
  font-weight: 400 !important;
  line-height: 20px;
  letter-spacing: -0.14px;
  color: #282828;
  transition: background-color 0.15s ease;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
}

[data-theme='dark'] #nd-sidebar-mobile a[href^='/docs/'],
html.dark #nd-sidebar-mobile a[href^='/docs/'] {
  color: #c0c0c0;
}

#nd-sidebar-mobile a[href^='/docs/'][data-active='true'] {
  background: rgba(40, 40, 40, 0.08);
}

[data-theme='dark'] #nd-sidebar-mobile a[href^='/docs/'][data-active='true'],
html.dark #nd-sidebar-mobile a[href^='/docs/'][data-active='true'] {
  background: rgba(255, 255, 255, 0.1);
}

#nd-sidebar-mobile a[href^='/docs/']:hover {
  background: rgba(40, 40, 40, 0.05);
}

[data-theme='dark'] #nd-sidebar-mobile a[href^='/docs/']:hover,
html.dark #nd-sidebar-mobile a[href^='/docs/']:hover {
  background: rgba(255, 255, 255, 0.06);
}

#nd-sidebar-mobile a[href^='/docs/'][data-active='true']:hover {
  background: rgba(40, 40, 40, 0.12);
}

[data-theme='dark'] #nd-sidebar-mobile a[href^='/docs/'][data-active='true']:hover,
html.dark #nd-sidebar-mobile a[href^='/docs/'][data-active='true']:hover {
  background: rgba(255, 255, 255, 0.14);
}

#nd-sidebar-mobile a[href^='/docs/'][style] {
  padding-inline-start: 20px !important;
  padding-inline-end: 12px !important;
}

#nd-sidebar-mobile a[href='/docs/components'] {
  display: none;
}

#nd-sidebar-mobile p {
  margin: 24px 0 8px !important;
  margin-left: 12px !important;
  padding-block: 0;
  padding-inline-start: 0 !important;
  padding-inline-end: 12px !important;
  font-size: 14px;
  font-weight: 600 !important;
  line-height: 20px;
  letter-spacing: -0.01em;
  text-transform: none;
  color: var(--color-fd-foreground, #181818) !important;
}

[data-theme='dark'] #nd-sidebar-mobile p,
html.dark #nd-sidebar-mobile p {
  color: var(--color-fd-foreground, #ececec) !important;
}

#nd-sidebar-mobile p[style] {
  padding-inline-start: 0 !important;
  padding-inline-end: 12px !important;
  margin-left: 12px !important;
}

#nd-sidebar-mobile p:first-of-type {
  margin-top: 0;
}

/* ── Right TOC — OpenAI-matching: 13px, gray, minimal ── */
#nd-docs-layout.plex-docs-shell #nd-toc {
  padding-top: 1.25rem;
  padding-right: 1rem;
  border-left: none;
  overflow-y: auto;
  overscroll-behavior: contain;
  scrollbar-gutter: stable;
  font-size: 13px;
  color: #666666;
}

[data-theme='dark'] #nd-docs-layout.plex-docs-shell #nd-toc,
html.dark #nd-docs-layout.plex-docs-shell #nd-toc {
  color: #999999;
}

#nd-docs-layout.plex-docs-shell #nd-toc h3 {
  margin-top: 0;
  margin-bottom: 0.8rem;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

#nd-docs-layout.plex-docs-shell #nd-toc .plex-docs-toc-section-title {
  margin: 0 0 0.9rem;
  font-size: 13px;
  font-weight: 500;
  color: inherit;
}

/* Docs page rhythm and typography — OpenAI-matching scale */
#nd-page.plex-docs-page {
  gap: 0;
  max-width: min(100%, 52rem);
}

html[data-docs-width='centered'] #nd-page.plex-docs-page {
  max-width: min(100%, 52rem);
}

#nd-page.plex-docs-page .plex-docs-title-row {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
  margin-top: 0.35rem;
  margin-bottom: 0.5rem;
}

/* H1: 30px / 600 — matches OpenAI exactly */
#nd-page.plex-docs-page .plex-docs-title {
  margin: 0;
  font-size: 30px;
  font-weight: 600;
  line-height: 42px;
  letter-spacing: -0.6px;
  color: var(--color-fd-foreground);
}

/* Subtitle: 16px / 400 — medium gray, same as body */
#nd-page.plex-docs-page .plex-docs-description {
  margin-top: 0;
  margin-bottom: 1.5rem;
  max-width: 62ch;
  font-size: 16px;
  line-height: 26px;
  letter-spacing: -0.16px;
  color: var(--color-fd-muted-foreground);
}

#nd-page.plex-docs-page .plex-docs-nav-top {
  margin: 0;
}

#nd-page.plex-docs-page .plex-docs-nav-bottom {
  margin-top: 3rem;
  margin-bottom: 0.75rem;
  padding-top: 1rem;
  border-top: 1px solid var(--color-fd-border);
}

#nd-page.plex-docs-page .plex-docs-body.prose {
  margin-top: 0;
}

/* H2: 20px / 600 — clear hierarchy: H1(30) > H2(20) > H3(18) > body(16) */
#nd-page.plex-docs-page .plex-docs-body.prose :where(h2):not(:where(.not-prose, .not-prose *)) {
  margin-top: 28px;
  margin-bottom: 8px;
  font-size: 20px;
  line-height: 26px;
  letter-spacing: -0.16px;
  font-weight: 600;
  color: var(--color-fd-foreground);
}

/* H3: 18px / 600 */
#nd-page.plex-docs-page .plex-docs-body.prose :where(h3):not(:where(.not-prose, .not-prose *)) {
  margin-top: 28.8px;
  margin-bottom: 10.8px;
  font-size: 18px;
  line-height: 24px;
  letter-spacing: -0.18px;
  font-weight: 600;
  color: var(--color-fd-foreground);
}

/* H4: 14px / 600 */
#nd-page.plex-docs-page .plex-docs-body.prose :where(h4):not(:where(.not-prose, .not-prose *)) {
  margin-top: 20px;
  margin-bottom: 4px;
  font-size: 14px;
  line-height: 20px;
  letter-spacing: -0.14px;
  font-weight: 600;
  color: var(--color-fd-foreground);
}

/* Body: 16px / 400, #282828 (rgb(40,40,40)) — matches OpenAI reference exactly */
#nd-page.plex-docs-page .plex-docs-body.prose :where(p):not(:where(.not-prose, .not-prose *)) {
  margin-top: 0;
  margin-bottom: 1rem;
  font-size: 16px;
  line-height: 25.6px;
  letter-spacing: -0.16px;
  color: #282828;
}

[data-theme='dark'] #nd-page.plex-docs-page .plex-docs-body.prose :where(p):not(:where(.not-prose, .not-prose *)),
html.dark #nd-page.plex-docs-page .plex-docs-body.prose :where(p):not(:where(.not-prose, .not-prose *)) {
  color: var(--color-fd-muted-foreground);
}

#nd-page.plex-docs-page .plex-docs-body.prose :where(h2, h3, h4):not(:where(.not-prose, .not-prose *))+ :where(p):not(:where(.not-prose, .not-prose *)) {
  margin-top: 0;
  margin-bottom: 1rem;
}

/* Lists: 16px (same as body), #282828 — matches OpenAI reference */
#nd-page.plex-docs-page .plex-docs-body.prose :where(ul, ol):not(:where(.not-prose, .not-prose *)) {
  margin-top: 0.25rem;
  margin-bottom: 1rem;
  font-size: 16px;
  line-height: 25.6px;
  letter-spacing: -0.16px;
  color: #282828;
}

[data-theme='dark'] #nd-page.plex-docs-page .plex-docs-body.prose :where(ul, ol):not(:where(.not-prose, .not-prose *)),
html.dark #nd-page.plex-docs-page .plex-docs-body.prose :where(ul, ol):not(:where(.not-prose, .not-prose *)) {
  color: var(--color-fd-muted-foreground);
}

#nd-page.plex-docs-page .plex-docs-body.prose :where(li):not(:where(.not-prose, .not-prose *)) {
  margin-top: 0.25rem;
}

/* Inline code in prose: OpenAI-like compact pill */
#nd-page.plex-docs-page .plex-docs-body.prose
  :where(code):not(:where(.not-prose, .not-prose *, pre code)) {
  font-size: 14px;
  font-weight: 400;
  line-height: 20px;
  color: var(--color-fd-foreground);
  background: rgb(0 0 0 / 4%);
  padding: 2px 8px;
  border: none;
  border-radius: 6px;
}

[data-theme='dark'] #nd-page.plex-docs-page .plex-docs-body.prose
  :where(code):not(:where(.not-prose, .not-prose *, pre code)),
html.dark #nd-page.plex-docs-page .plex-docs-body.prose
  :where(code):not(:where(.not-prose, .not-prose *, pre code)) {
  background: rgb(255 255 255 / 8%);
}

/* Prose links: no underline, medium weight — matches OpenAI reference */
#nd-page.plex-docs-page .plex-docs-body.prose :where(a):not(:where(.not-prose, .not-prose *)) {
  font-weight: 500;
  text-decoration: none;
}

/* Heading anchor links: no underline, inherit weight/color from heading */
#nd-page.plex-docs-page .plex-docs-body.prose h2 a,
#nd-page.plex-docs-page .plex-docs-body.prose h3 a,
#nd-page.plex-docs-page .plex-docs-body.prose h4 a {
  text-decoration: none !important;
  font-weight: inherit !important;
  color: inherit !important;
}

/* Strong text inherits parent color with semibold weight */
#nd-page.plex-docs-page .plex-docs-body.prose :where(strong):not(:where(.not-prose, .not-prose *)) {
  font-weight: 600;
  color: inherit;
}

/* Horizontal rule: subtle separator with roomy spacing */
#nd-page.plex-docs-page .plex-docs-body.prose :where(hr):not(:where(.not-prose, .not-prose *)) {
  height: 0;
  margin: 48px 0;
  border: 0;
  border-top: 1px solid rgb(0 0 0 / 5%);
}

[data-theme='dark'] #nd-page.plex-docs-page .plex-docs-body.prose :where(hr):not(:where(.not-prose, .not-prose *)),
html.dark #nd-page.plex-docs-page .plex-docs-body.prose :where(hr):not(:where(.not-prose, .not-prose *)) {
  border-top-color: rgb(255 255 255 / 5%);
}

/* Callout/Note blocks — OpenAI style: subtle gray bg, no colored border */
#nd-page.plex-docs-page .plex-docs-body [data-callout] {
  margin: 24px 0;
  padding: 16px 20px;
  background: rgb(0 0 0 / 3%);
  border: none;
  border-left: none;
  border-radius: 8px;
  color: inherit;
}

[data-theme='dark'] #nd-page.plex-docs-page .plex-docs-body [data-callout],
html.dark #nd-page.plex-docs-page .plex-docs-body [data-callout] {
  background: rgb(255 255 255 / 3%);
}

#nd-page.plex-docs-page .plex-docs-body [data-callout] svg {
  color: #999999;
}

#nd-page.plex-docs-page .plex-docs-body [data-callout] p {
  font-size: 16px;
  line-height: 25.6px;
  color: #282828;
}

[data-theme='dark'] #nd-page.plex-docs-page .plex-docs-body [data-callout] p,
html.dark #nd-page.plex-docs-page .plex-docs-body [data-callout] p {
  color: var(--color-fd-muted-foreground);
}

/* ── Prose tables — OpenAI-matching: 14px body, 13px header, 8px padding ── */

#nd-page.plex-docs-page .plex-docs-body.prose
  table:not(:where(.not-prose, .not-prose *)) {
  width: 100%;
  border-collapse: collapse !important;
  border-spacing: 0 !important;
  border: 0 !important;
  border-radius: 0 !important;
  margin-top: 1rem;
  margin-bottom: 1.7rem;
  font-size: 14px !important;
  line-height: 24px !important;
  letter-spacing: -0.01em !important;
  background: transparent !important;
}

#nd-page.plex-docs-page .plex-docs-body.prose
  thead th:not(:where(.not-prose, .not-prose *)) {
  padding: 8px 12px !important;
  font-size: 13px !important;
  font-weight: 600 !important;
  line-height: 18px !important;
  color: #181818 !important;
  background: transparent !important;
  border-bottom: 1px solid #dedede !important;
  border-left: 0 !important;
  border-right: 0 !important;
}

[data-theme='dark'] #nd-page.plex-docs-page .plex-docs-body.prose
  thead th:not(:where(.not-prose, .not-prose *)),
html.dark #nd-page.plex-docs-page .plex-docs-body.prose
  thead th:not(:where(.not-prose, .not-prose *)) {
  color: #999999 !important;
  background: transparent !important;
  border-bottom-color: rgb(255 255 255 / 8%) !important;
}

#nd-page.plex-docs-page .plex-docs-body.prose
  tbody th:not(:where(.not-prose, .not-prose *)),
#nd-page.plex-docs-page .plex-docs-body.prose
  tbody td:not(:where(.not-prose, .not-prose *)) {
  padding: 8px 12px !important;
  font-size: 14px !important;
  line-height: 24px !important;
  color: #282828 !important;
  border: 0 !important;
  background: transparent !important;
}

[data-theme='dark'] #nd-page.plex-docs-page .plex-docs-body.prose
  tbody th:not(:where(.not-prose, .not-prose *)),
[data-theme='dark'] #nd-page.plex-docs-page .plex-docs-body.prose
  tbody td:not(:where(.not-prose, .not-prose *)),
html.dark #nd-page.plex-docs-page .plex-docs-body.prose
  tbody th:not(:where(.not-prose, .not-prose *)),
html.dark #nd-page.plex-docs-page .plex-docs-body.prose
  tbody td:not(:where(.not-prose, .not-prose *)) {
  color: var(--color-fd-foreground) !important;
}

#nd-page.plex-docs-page .plex-docs-body.prose
  :where(tbody tr):not(:where(.not-prose, .not-prose *)) {
  border-top: 0 !important;
  border-bottom: 0 !important;
  box-shadow: none !important;
}

#nd-page.plex-docs-page .plex-docs-body.prose
  :where(tbody td, tbody th):not(:where(.not-prose, .not-prose *)) {
  border-top: 0 !important;
  border-left: 0 !important;
  border-right: 0 !important;
  border-bottom: 0 !important;
}

#nd-page.plex-docs-page .plex-docs-body.prose
  :where(tbody tr:not(:last-child)):not(
    :where(.not-prose, .not-prose *)
  ) {
  box-shadow: none !important;
  border-bottom: 1px solid #ededed !important;
}

[data-theme='dark'] #nd-page.plex-docs-page .plex-docs-body.prose
  :where(tbody tr:not(:last-child)):not(:where(.not-prose, .not-prose *)),
html.dark #nd-page.plex-docs-page .plex-docs-body.prose
  :where(tbody tr:not(:last-child)):not(:where(.not-prose, .not-prose *)) {
  border-bottom-color: rgb(255 255 255 / 8%) !important;
}

#nd-page.plex-docs-page .plex-docs-body.prose a.block.rounded-xl.border.bg-fd-card:not(:where(.not-prose, .not-prose *)) {
  background: var(--color-fd-background) !important;
  text-decoration: none !important;
  border-color: rgb(0 0 0 / 5%) !important;
}

[data-theme='dark'] #nd-page.plex-docs-page .plex-docs-body.prose a.block.rounded-xl.border.bg-fd-card:not(:where(.not-prose, .not-prose *)),
html.dark #nd-page.plex-docs-page .plex-docs-body.prose a.block.rounded-xl.border.bg-fd-card:not(:where(.not-prose, .not-prose *)) {
  border-color: rgb(255 255 255 / 5%) !important;
}

#nd-page.plex-docs-page .plex-docs-body.prose a.block.rounded-xl.border.bg-fd-card:not( :where(.not-prose, .not-prose *)):hover {
  background: color-mix(in oklab,
      var(--color-fd-background) 94%,
      var(--color-fd-foreground) 6%) !important;
}

#nd-page.plex-docs-page .components-index-grid .grid {
  grid-template-columns: repeat(3, 1fr) !important;
}

#nd-page.plex-docs-page .components-index-grid a.block.rounded-xl.border.bg-fd-card {
  text-decoration: none !important;
  display: flex;
  align-items: center;
  justify-content: flex-start !important;
  min-height: 56px;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 24px !important;
}

#nd-page.plex-docs-page .components-index-grid a.block.rounded-xl.border.bg-fd-card>* {
  margin-top: 0 !important;
  margin-bottom: 0 !important;
}

#nd-page.plex-docs-page .components-index-grid a.block.rounded-xl.border.bg-fd-card>.text-sm:empty {
  display: none;
}

#nd-page.plex-docs-page .components-index-grid a.block.rounded-xl.border.bg-fd-card h3 {
  display: flex;
  align-items: center;
  margin: 0 !important;
  font-size: 0.95rem;
  line-height: 1.35;
  font-weight: 500;
  text-align: left !important;
}

/* Hide navigation on components index page */
#nd-page.plex-docs-page #components-index-page~.plex-docs-nav-top,
#nd-page.plex-docs-page #components-index-page~.plex-docs-nav-bottom,
#nd-page.plex-docs-page:has(#components-index-page) .plex-docs-nav-top,
#nd-page.plex-docs-page:has(#components-index-page) .plex-docs-nav-bottom {
  display: none !important;
}

/* Hide "Previous" button on the first component page (Alert) */
#nd-page.plex-docs-page #first-component-page~.plex-docs-nav-bottom a:first-child,
#nd-page.plex-docs-page:has(#first-component-page) .plex-docs-nav-bottom a:first-child {
  visibility: hidden !important;
  pointer-events: none !important;
}

#nd-page.plex-docs-page .plex-docs-body.prose> :first-child:not(:where(.not-prose, .not-prose *)):not(h2) {
  margin-top: 0;
}

/* Balance spacing: more space above Examples/Reference h2s */
#nd-page.plex-docs-page .plex-docs-body.prose #examples,
#nd-page.plex-docs-page .plex-docs-body.prose #reference,
#nd-page.plex-docs-page .plex-docs-body .not-prose + h2 {
  margin-top: 2rem !important;
}

/* ── Code blocks: OpenAI-matching style ──
   Fumadocs figure gets: bg-fd-card rounded-xl border shadow-sm text-sm
   Inner div gets: text-[0.8125rem] py-3.5
   We override all of these to match https://developers.openai.com/apps-sdk/deploy */

#nd-page.plex-docs-page figure.shiki {
  --padding-left: 0px;
  --padding-right: 0px;
  background: var(--docs-code-block-bg) !important;
  border: 0 !important;
  border-radius: 10px !important;
  box-shadow: none !important;
}

/* Inner scrollable region: override Fumadocs text-[0.8125rem] → 14px, py-3.5 → 12px 16px */
#nd-page.plex-docs-page figure.shiki > div[role='region'] {
  font-size: 14px !important;
  line-height: 24px !important;
  padding: 12px 16px !important;
  padding-right: 48px !important; /* space for copy button */
}

/* pre/code inside the region */
#nd-page.plex-docs-page figure.shiki pre {
  padding: 0 !important;
  margin: 0;
  background: transparent !important;
  overflow-x: auto;
}

#nd-page.plex-docs-page figure.shiki code {
  font-size: 14px !important;
  line-height: 24px !important;
}

/* ── Fumadocs copy button — match Plex UI CopyButton (ghost/secondary) exactly ──
   Plex UI uses Button variant="ghost" color="secondary" size="2xs" uniform (24×24).
   Ghost hover bg: rgba(13,13,13,0.08) via ::before. Active: rgba(13,13,13,0.12).
   Fumadocs wrapper has backdrop-blur-lg/rounded-lg/top-3/right-2 — strip all that. */

/* Container div wrapping the Fumadocs copy button — reset Tailwind classes */
figure.shiki > div:has(> button[aria-label='Copy Text']),
figure.shiki > div:has(> button[aria-label='Copied Text']) {
  top: 0 !important;
  right: 0 !important;
  padding: 12px 8px 0 0 !important;
  background: transparent !important;
  border-radius: 0 !important;
  /* Kill Tailwind backdrop-blur-lg by resetting the variable it uses */
  --tw-backdrop-blur: !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* The copy button itself — 24×24, 0 padding, rounded-md (6px) */
button[aria-label='Copy Text'],
button[aria-label='Copied Text'] {
  position: relative;
  cursor: pointer;
  color: #24292e !important;
  background: transparent !important;
  border-radius: 6px;
  padding: 0 !important;
  width: 24px !important;
  height: 24px !important;
}

/* Hover: subtle bg matching Plex UI ghost/secondary (8% black) */
button[aria-label='Copy Text']:hover,
button[aria-label='Copied Text']:hover {
  color: #24292e !important;
  background: rgba(13, 13, 13, 0.08) !important;
}

/* Active/pressed: slightly stronger bg (12% black) */
button[aria-label='Copy Text']:active,
button[aria-label='Copied Text']:active {
  color: #24292e !important;
  background: rgba(13, 13, 13, 0.12) !important;
}

/* Dark mode */
[data-theme='dark'] figure.shiki > div:has(> button[aria-label='Copy Text']),
[data-theme='dark'] figure.shiki > div:has(> button[aria-label='Copied Text']),
html.dark figure.shiki > div:has(> button[aria-label='Copy Text']),
html.dark figure.shiki > div:has(> button[aria-label='Copied Text']) {
  background: transparent !important;
}

[data-theme='dark'] button[aria-label='Copy Text'],
[data-theme='dark'] button[aria-label='Copied Text'],
html.dark button[aria-label='Copy Text'],
html.dark button[aria-label='Copied Text'] {
  color: #d0d0d0 !important;
}

[data-theme='dark'] button[aria-label='Copy Text']:hover,
[data-theme='dark'] button[aria-label='Copied Text']:hover,
html.dark button[aria-label='Copy Text']:hover,
html.dark button[aria-label='Copied Text']:hover {
  color: #d0d0d0 !important;
  background: rgba(255, 255, 255, 0.12) !important;
}

[data-theme='dark'] button[aria-label='Copy Text']:active,
[data-theme='dark'] button[aria-label='Copied Text']:active,
html.dark button[aria-label='Copy Text']:active,
html.dark button[aria-label='Copied Text']:active {
  color: #d0d0d0 !important;
  background: rgba(255, 255, 255, 0.16) !important;
}

button[aria-label='Copy Text'] > svg,
button[aria-label='Copied Text'] > svg {
  opacity: 0;
}

button[aria-label='Copy Text']::after,
button[aria-label='Copied Text']::after {
  content: '';
  position: absolute;
  inset: 0;
  background: currentColor;
  -webkit-mask-size: 16px;
  mask-size: 16px;
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-position: center;
  mask-position: center;
}

/* Copy icon — two overlapping rounded rectangles (OpenAI reference) */
button[aria-label='Copy Text']::after {
  -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='black' fill-rule='evenodd' d='M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z' clip-rule='evenodd'/%3E%3C/svg%3E");
  mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='black' fill-rule='evenodd' d='M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z' clip-rule='evenodd'/%3E%3C/svg%3E");
}

/* Copied/check icon — filled checkmark matching Plex UI CheckMd */
button[aria-label='Copied Text']::after {
  -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='black' d='M18.0633 5.67387C18.5196 5.98499 18.6374 6.60712 18.3262 7.06343L10.8262 18.0634C10.6585 18.3095 10.3898 18.4679 10.0934 18.4957C9.79688 18.5235 9.50345 18.4178 9.29289 18.2072L4.79289 13.7072C4.40237 13.3167 4.40237 12.6835 4.79289 12.293C5.18342 11.9025 5.81658 11.9025 6.20711 12.293L9.85368 15.9396L16.6738 5.93676C16.9849 5.48045 17.607 5.36275 18.0633 5.67387Z'/%3E%3C/svg%3E");
  mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='black' d='M18.0633 5.67387C18.5196 5.98499 18.6374 6.60712 18.3262 7.06343L10.8262 18.0634C10.6585 18.3095 10.3898 18.4679 10.0934 18.4957C9.79688 18.5235 9.50345 18.4178 9.29289 18.2072L4.79289 13.7072C4.40237 13.3167 4.40237 12.6835 4.79289 12.293C5.18342 11.9025 5.81658 11.9025 6.20711 12.293L9.85368 15.9396L16.6738 5.93676C16.9849 5.48045 17.607 5.36275 18.0633 5.67387Z'/%3E%3C/svg%3E");
}

/* Fumadocs Accordion: use page background instead of card background for lighter look */
#nd-page.plex-docs-page .plex-docs-body [data-orientation].bg-fd-card {
  background-color: var(--color-fd-background) !important;
}

/* When mobile TOC is open, lift app root above sidebar drawer (z-40) so TOC is on top.
   Sidebar is in a portal (sibling to app root), so we raise the root container. */
body:has(#nd-docs-layout:has([data-toc-popover][data-state="open"])) > div {
  position: relative;
  z-index: 50 !important;
}

/* Keep preview popovers/menus below sticky global nav and mobile TOC */
body [data-radix-popper-content-wrapper] {
  z-index: 5 !important;
}

/* Hide Fumadocs default sidebar/search controls — we provide our own via nav.component */
#nd-docs-layout button[aria-label='Collapse Sidebar'],
#nd-docs-layout button[aria-label='Open Search'],
#nd-docs-layout button[aria-label='Open Sidebar']:not([data-plex-nav-trigger]) {
  display: none !important;
}

@media (max-width: 768px) {
  /* Navbar height stays 64px on mobile — matches OpenAI */

  #nd-docs-layout.plex-docs-shell #nd-toc {
    border-left: none;
  }

  #nd-page.plex-docs-page {
    max-width: 100%;
  }

  #nd-page.plex-docs-page .plex-docs-title-row {
    gap: 10px;
  }
}

/* Landing: minimal scroll-triggered reveal */
[data-reveal] {
  opacity: 0;
  transform: translateY(0.75rem);
  transition: opacity 0.5s ease-out, transform 0.5s ease-out;
}

[data-reveal][data-visible='true'] {
  opacity: 1;
  transform: translateY(0);
}
